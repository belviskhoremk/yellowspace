{% load static %}
{% load i18n %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ShopEase - Your Mini E-commerce Solution</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{% static 'css/basic.css' %}">
    <link rel="icon" href="{% static 'img/favicon_w3cub/favicon.ico' %}" type="image/x-icon">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@700&family=Quicksand&display=swap" rel="stylesheet">
    <style>
        /* Enhanced Hero Section */
       .hero {
          background: linear-gradient(135deg, rgba(255, 193, 7, 0.9), rgba(255, 109, 0, 0.9)),
                      url('https://images.unsplash.com/photo-1607082348824-0a96f2a4b9da?...') center/cover no-repeat;
          padding: 8rem 1rem;
          text-align: center;
          color: var(--dark);
          position: relative;
          overflow: hidden;
        }

        .hero::before {
          content: '';
          position: absolute;
          inset: 0;
          background: radial-gradient(circle at center, rgba(255, 255, 255, 0.1), transparent 70%);
        }

        .hero-content {
          max-width: 800px;
          margin: 0 auto;
          z-index: 2;
          position: relative;
          animation: heroSlideUp 1s ease-out;
        }

        @keyframes heroSlideUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }


.hero h2 {
  font-size: clamp(2.5rem, 5vw, 4rem);
  margin-bottom: 1.5rem;
  background: linear-gradient(45deg, var(--dark), var(--gray));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  text-shadow: 0 4px 8px rgba(0,0,0,0.1);
}

.hero p {
  font-size: 1.1rem;
  max-width: 600px;
  margin: 0 auto 2.5rem;
  opacity: 0.9;
  line-height: 1.8;
}

.hero-buttons {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 1rem;
}

.btn {
  padding: 1rem 2.5rem;
  font-size: 1rem;
  border-radius: 50px;
  font-weight: 600;
  border: none;
  position: relative;
  overflow: hidden;
  font-family: 'Poppins', sans-serif;
  cursor: pointer;
  transition: var(--transition);
  display: inline-block;
  text-align: center;
  white-space: nowrap;
}

.btn::before {
  content: '';
  position: absolute;
  top: 0; left: -100%;
  width: 100%; height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
  transition: left 0.5s;
}

.btn:hover::before {
  left: 100%;
}

.btn-primary {
  background: linear-gradient(45deg, var(--dark), #424242);
  color: white;
  box-shadow: 0 8px 25px rgba(33, 33, 33, 0.3);
}

        .btn-secondary {
  background: rgba(255, 255, 255, 0.9);
  color: var(--dark);
  border: 2px solid rgba(255, 255, 255, 0.3);
  box-shadow: 0 8px 25px rgba(255, 255, 255, 0.3);
}

.btn-primary:hover,
.btn-secondary:hover {
  transform: translateY(-3px);
}

/* Responsive Hero Text */
@media (max-width: 768px) {
  .hero h2 {
    font-size: clamp(2rem, 7vw, 3rem);
  }

  .hero-buttons {
    flex-direction: column;
    align-items: center;
  }

  .btn {
    width: 100%;
    max-width: 280px;
  }
}
        /* Floating Elements */
        .floating-elements {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
        }

        .floating-element {
            position: absolute;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
        }

        .floating-element:nth-child(1) {
            width: 80px;
            height: 80px;
            top: 20%;
            left: 10%;
            animation-delay: 0s;
        }

        .floating-element:nth-child(2) {
            width: 60px;
            height: 60px;
            top: 60%;
            right: 10%;
            animation-delay: 2s;
        }

        .floating-element:nth-child(3) {
            width: 40px;
            height: 40px;
            top: 80%;
            left: 20%;
            animation-delay: 4s;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        /* Enhanced Categories Section */
        .categories {
            padding: 100px 0;
            background: linear-gradient(135deg, #FAFAFA 0%, #F5F5F5 100%);
            position: relative;
        }

        .section-title {
            text-align: center;
            margin-bottom: 60px;
            font-size: 3rem;
            position: relative;
            color: var(--dark);
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            border-radius: 2px;
        }

        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 30px;
        }

        .category-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 40px 30px;
            text-align: center;
            transition: var(--transition);
            box-shadow: var(--box-shadow);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .category-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            opacity: 0;
            transition: var(--transition);
        }

        .category-card:hover::before {
            opacity: 0.05;
        }

        .category-card:hover {
            transform: translateY(-15px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }

        .category-icon {
            width: 90px;
            height: 90px;
            background: linear-gradient(45deg, rgba(255, 193, 7, 0.1), rgba(255, 109, 0, 0.1));
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 auto 25px;
            transition: var(--transition);
            position: relative;
            z-index: 1;
        }

        .category-card:hover .category-icon {
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            transform: scale(1.1) rotate(5deg);
        }

        .category-icon i {
            font-size: 35px;
            color: var(--primary);
            transition: var(--transition);
        }

        .category-card:hover .category-icon i {
            color: white;
            transform: scale(1.1);
        }

        .category-name {
            font-weight: 600;
            font-size: 20px;
            color: var(--dark);
            position: relative;
            z-index: 1;
        }

        /* Enhanced Products Section */
        .products {
            padding: 100px 0;
            background: linear-gradient(135deg, #FFFDE7 0%, #FFF8E1 100%);
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 35px;
        }

        .product-card {
            background: white;
            border-radius: var(--border-radius);
            overflow: hidden;
            transition: var(--transition);
            box-shadow: var(--box-shadow);
            position: relative;
        }

        .product-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
        }

        .product-image {
            aspect-ratio: 4 / 3;
            padding: 1rem;
            background: linear-gradient(135deg, #F8F9FA, #E9ECEF);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .product-image::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent, rgba(255, 193, 7, 0.1), transparent);
            transform: translateX(-100%);
            transition: transform 0.6s;
        }

        .product-card:hover .product-image::before {
            transform: translateX(100%);
        }

        .product-image img {
            max-height: 200px;
            max-width: 100%;
            object-fit: contain;
            transition: transform 0.6s ease;
        }

        .product-card:hover .product-image img {
            transform: scale(1.05);
        }

        .product-info {
            padding: 25px;
        }

        .product-title {
            font-weight: 600;
            font-size: 20px;
            margin-bottom: 10px;
            color: var(--dark);
        }

        .product-category {
            display: inline-block;
            background: linear-gradient(45deg, rgba(255, 193, 7, 0.15), rgba(255, 109, 0, 0.15));
            color: var(--primary-dark);
            padding: 6px 15px;
            border-radius: 25px;
            font-size: 13px;
            margin-bottom: 15px;
            font-weight: 500;
        }

        .product-price {
            font-weight: 700;
            font-size: 24px;
            color: var(--dark);
            margin-bottom: 20px;
        }

        .product-actions {
            display: flex;
            gap: 10px;
        }

        .add-to-cart {
  flex: 1 1 100%;
  padding: 0.85rem 1.5rem;
  background: linear-gradient(45deg, var(--primary), var(--secondary));
  color: white;
  border: none;
  border-radius: var(--border-radius);
  font-weight: 600;
  font-size: clamp(0.9rem, 2.5vw, 1rem);
  text-align: center;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  cursor: pointer;
  transition: var(--transition);
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 0.5rem;
  min-width: 120px;
  max-width: 100%;
}


        .add-to-cart:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 193, 7, 0.4);
        }
        @media (max-width: 480px) {
  .add-to-cart {
    font-size: 0.9rem;
    padding: 0.75rem 1.25rem;
  }
}


        .product-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: linear-gradient(45deg, var(--secondary), var(--primary));
            color: white;
            padding: 8px 16px;
            border-radius: 25px;
            font-size: 12px;
            font-weight: 600;
            z-index: 10;
        }

        /* Trust Indicators */
        .trust-section {
            padding: 80px 0;
            background: white;
        }

        .trust-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            text-align: center;
        }

        .trust-item {
            padding: 30px;
            border-radius: var(--border-radius);
            transition: var(--transition);
        }

        .trust-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
        }

        .trust-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(45deg, rgba(255, 193, 7, 0.1), rgba(255, 109, 0, 0.1));
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 auto 20px;
        }

        .trust-icon i {
            font-size: 35px;
            color: var(--primary);
        }

        .trust-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--dark);
        }

        .trust-desc {
            color: var(--gray);
            line-height: 1.6;
        }


        /* Featured Banner */
        .featured-banner {
            background: linear-gradient(to right, var(--primary), var(--accent));
            padding: 40px 0;
            text-align: center;
            color: white;
            margin: 60px 0;
        }

        .banner-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .banner-content h3 {
            font-size: 2.2rem;
            margin-bottom: 20px;
        }

        .banner-content p {
            font-size: 1.1rem;
            margin-bottom: 25px;
            opacity: 0.9;
        }


        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hero h2 {
                font-size: 3rem;
            }

            .hero-buttons {
                flex-direction: column;
                align-items: center;
            }

            .btn {
                width: 100%;
                max-width: 300px;
            }

            nav ul {
                gap: 20px;
            }

            .categories-grid {
                grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            }

            .products-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 576px) {
            .header-container {
                flex-direction: column;
                gap: 20px;
            }

            .hero {
                padding: 80px 0;
            }

            .hero h2 {
                font-size: 2.5rem;
            }

            .section-title {
                font-size: 2.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-container">
            <div class="logo" translate="no">
                <img src="{% static 'img/yellowspace1.jpeg' %}" alt="Logo" class="logo-img">
                <h1 translate="no">Yellow<span translate="no">Space</span></h1>
            </div>
            <nav>
                <ul>
                    <li><a href="{% url 'index' %}" class="nav-link">Home</a></li>
                    <li><a href="{% url 'products' %}" class="nav-link">Products</a></li>
                    <li><a href="{% url 'cart' %}" class="nav-link">Cart <span class="cart-count" id="cartCount">0</span></a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <div class="hero">
        <div class="floating-elements">
            <div class="floating-element"></div>
            <div class="floating-element"></div>
            <div class="floating-element"></div>
        </div>
        <div class="container">
            <div class="hero-content">
                <h2>Discover Amazing Products</h2>
                <p>Experience premium quality with fast delivery and exceptional customer service. Your satisfaction is our priority.</p>
                <a href="{% url 'products' %}" class="btn btn-primary">Shop Now</a>
            </div>
        </div>
    </div>

    <!-- Categories Section -->
    <div class="categories">
        <div class="container">
            <h2 class="section-title">Shop By Category</h2>
            <div class="categories-grid" id="categoriesGrid">
                <!-- Categories will be populated dynamically -->
            </div>
        </div>
    </div>

    <!-- Trust Section -->
    <div class="trust-section">
        <div class="container">
            <div class="trust-grid">
                <div class="trust-item">
                    <div class="trust-icon">
                        <i class="fas fa-shipping-fast"></i>
                    </div>
                    <div class="trust-title">Free Shipping</div>
                    <div class="trust-desc">Free shipping on orders over $50. Fast and reliable delivery worldwide.</div>
                </div>
                <div class="trust-item">
                    <div class="trust-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <div class="trust-title">Secure Payment</div>
                    <div class="trust-desc">Your payment information is protected with bank-level security.</div>
                </div>
                <div class="trust-item">
                    <div class="trust-icon">
                        <i class="fas fa-headset"></i>
                    </div>
                    <div class="trust-title">24/7 Support</div>
                    <div class="trust-desc">Our customer support team is available around the clock to help you.</div>
                </div>
                <div class="trust-item">
                    <div class="trust-icon">
                        <i class="fas fa-undo"></i>
                    </div>
                    <div class="trust-title">Easy Returns</div>
                    <div class="trust-desc">30-day return policy. No questions asked, full refund guaranteed.</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Featured Products Section -->
    <div class="products">
        <div class="container">
            <h2 class="section-title">Featured Products</h2>
            <div class="products-grid" id="featuredProducts">
                <!-- Products will be populated dynamically -->
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-container">
                <div class="footer-col">
                    <h3>ShopEase</h3>
                    <p>Your one-stop shop for all your needs. Quality products at affordable prices with exceptional customer service.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-pinterest"></i></a>
                    </div>
                </div>
                <div class="footer-col">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="{% url 'index' %}">Home</a></li>
                        <li><a href="{% url 'products' %}">Products</a></li>
                        <li><a href="#about">About Us</a></li>
                        <li><a href="#contact">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h3>Categories</h3>
                    <ul id="footerCategories">
                        <!-- Footer categories will be populated dynamically -->
                    </ul>
                </div>
                <div class="footer-col">
                    <h3>Contact Us</h3>
                    <ul>
                        <li><i class="fas fa-map-marker-alt"></i> 123 Commerce St, Business City</li>
                        <li><i class="fas fa-phone"></i> +1 (555) 123-4567</li>
                        <li><i class="fas fa-envelope"></i> support@shopease.com</li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2025 YellowSpace. All rights reserved.</p>
            </div>
        </div>
    </footer>



<script>
        // Global variables
        let cartItems = JSON.parse(localStorage.getItem('cartItems')) || {};
        const API_BASE_URL = '/api'; // Make sure this matches your actual API base URL

        // Utility Functions
        function formatPrice(price) {
            return `FCFA${parseFloat(price).toFixed(2)}`;
        }

        function getDaysAgo(dateString) {
            const createdDate = new Date(dateString);
            const today = new Date();
            const diffTime = Math.abs(today - createdDate);
            return Math.ceil(diffTime / (1000 * 60 * 60 * 24));
        }

        // Enhanced Cart Management
        function updateCartCount() {
            const count = Object.keys(cartItems).length;
            const cartCountElement = document.getElementById('cartCount');
            if (cartCountElement) {
                cartCountElement.textContent = count;
            }
        }

        function addToCart(product) {
            // Add to cart object
            if (!cartItems[product.id]) {
                cartItems[product.id] = {
                    id: product.id,
                    name: product.name,
                    price: parseFloat(product.price) || 0,
                    quantity: 1,
                    {#image_url: product.primary_image_url,#}
                    category_name: product.category_name
                };
            } else {
                cartItems[product.id].quantity += 1;
            }

            // Save to localStorage
            localStorage.setItem('cartItems', JSON.stringify(cartItems));

            // Update cart count
            updateCartCount();
        }

        function getCartItemCount() {
            return Object.keys(cartItems).length;
        }

        function getTotalCartQuantity() {
            return Object.values(cartItems).reduce((total, item) => total + item.quantity, 0);
        }

        // API Fetch Functions
        async function fetchCategories() {
            try {
                const response = await fetch(`${API_BASE_URL}/products/categories/`);
                if (!response.ok) {
                    throw new Error('Failed to fetch categories');
                }
                const data = await response.json();

                // Handle paginated response structure
                if (data && Array.isArray(data.results)) {
                    return data.results;
                }
                // Fallback for non-paginated response
                else if (Array.isArray(data)) {
                    return data;
                }
                // If single object, wrap in array
                else if (data && typeof data === 'object') {
                    return [data];
                }

                return [];
            } catch (error) {
                console.error('Error fetching categories:', error);
                return [];
            }
        }

        async function fetchFeaturedProducts() {
            try {
                const response = await fetch(`${API_BASE_URL}/products/?ordering=-created_at&limit=4`);
                if (!response.ok) {
                    throw new Error('Failed to fetch products');
                }
                const data = await response.json();

                // Handle different API response formats (from first code)
                let products = [];
                if (Array.isArray(data)) {
                    products = data;
                } else if (data && Array.isArray(data.results)) {
                    products = data.results;
                } else if (data && Array.isArray(data.products)) {
                    products = data.products;
                } else if (data && Array.isArray(data.data)) {
                    products = data.data;
                }

                return products;
            } catch (error) {
                console.error('Error fetching products:', error);
                return [];
            }
        }

        // Rendering Functions
        function renderCategoryCard(category) {
            const iconMap = {
                'Fashion': 'fas fa-tshirt',
                'Electronics': 'fas fa-laptop',
                'Home & Kitchen': 'fas fa-home',
                'Health & Beauty': 'fas fa-heartbeat',
                'Toys & Games': 'fas fa-gamepad'
            };

            const iconClass = iconMap[category.name] || 'fas fa-shopping-bag';

            return `
                <div class="category-card" data-category="${category.id}">
                    <div class="category-icon">
                        <i class="${iconClass}"></i>
                    </div>
                    <div class="category-name">${category.name}</div>
                </div>
            `;
        }

        function renderFooterCategory(category) {
            return `
                <li><a href="/products/?category=${category.id}">${category.name}</a></li>
            `;
        }

        function renderProductCard(product) {
            // Determine if product is new (created within last 7 days)
            const isNew = getDaysAgo(product.created_at) <= 7;
            const badgeHtml = isNew ? `<span class="product-badge">New</span>` : '';

            // Check if product is out of stock
            const isOutOfStock = product.quantity === 0;
            const isLowStock = product.quantity > 0 && product.quantity <= 10;

            // Add stock badges
            let stockBadgeHtml = '';
            if (isOutOfStock) {
                stockBadgeHtml = `<span class="product-badge" style="background-color: #ff6b6b;">Out of Stock</span>`;
            } else if (isLowStock) {
                stockBadgeHtml = `<span class="product-badge" style="background-color: #ffa500;">Low Stock</span>`;
            }

            return `
                <div class="product-card" data-id="${product.id}">
                    ${badgeHtml}
                    ${stockBadgeHtml}
                    <div class="product-image">
                        <img src="${product.primary_image_url || 'https://via.placeholder.com/300?text=No+Image'}" alt="${product.name}">
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">${product.name}</h3>
                        <span class="product-category">${product.category_name}</span>
                        <div class="product-price">${formatPrice(product.price)}</div>
                        <div class="product-stock">
                            <i class="fas fa-cubes"></i> In Stock: ${product.quantity}
                        </div>
                        <div class="product-actions">
                            <button class="btn btn-outline details-btn" data-product-id="${product.id}">Details</button>
                            <button class="btn btn-primary add-to-cart" data-product='${JSON.stringify(product)}' ${isOutOfStock ? 'disabled' : ''}>
                                <i class="fas fa-shopping-cart"></i> Add to Cart
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        // Initialization Functions
        async function initCategories() {
            const categories = await fetchCategories();
            console.log('Categories received:', categories);

            const categoriesGrid = document.getElementById('categoriesGrid');
            const footerCategoriesList = document.getElementById('footerCategories');

            if (categories.length > 0 && categoriesGrid) {
                categoriesGrid.innerHTML = categories.map(renderCategoryCard).join('');
            } else if (categoriesGrid) {
                categoriesGrid.innerHTML = '<p>No categories found</p>';
            }

            if (categories.length > 0 && footerCategoriesList) {
                footerCategoriesList.innerHTML = categories.map(renderFooterCategory).join('');
            } else if (footerCategoriesList) {
                footerCategoriesList.innerHTML = '<li>No categories available</li>';
            }
        }

        async function initFeaturedProducts() {
            const products = await fetchFeaturedProducts();
            const productsGrid = document.getElementById('featuredProducts');

            if (products.length > 0 && productsGrid) {
                productsGrid.innerHTML = products.map(renderProductCard).join('');
            } else if (productsGrid) {
                productsGrid.innerHTML = '<p>No featured products available</p>';
            }
        }

        // Event Handlers
        function setupEventListeners() {
            // Cart count initialization
            updateCartCount();

            // Add to cart buttons and other interactions
            document.addEventListener('click', function(e) {
                // Handle add to cart
                if (e.target.classList.contains('add-to-cart') ||
                    e.target.closest('.add-to-cart')) {
                    const button = e.target.classList.contains('add-to-cart') ?
                                 e.target : e.target.closest('.add-to-cart');

                    // Get product data
                    const productData = button.getAttribute('data-product');
                    if (productData) {
                        try {
                            const product = JSON.parse(productData);

                            // Add to cart
                            addToCart(product);

                            // Visual feedback
                            const originalHTML = button.innerHTML;
                            button.innerHTML = '<i class="fas fa-check"></i> Added';
                            button.style.backgroundColor = '#28a745';

                            setTimeout(() => {
                                button.innerHTML = originalHTML;
                                button.style.backgroundColor = '';
                            }, 1500);
                        } catch (error) {
                            console.error('Error parsing product data:', error);
                        }
                    }
                }

                // Handle details button
                if (e.target.classList.contains('details-btn') ||
                    e.target.closest('.details-btn')) {
                    const button = e.target.classList.contains('details-btn') ?
                                 e.target : e.target.closest('.details-btn');
                    const productId = button.getAttribute('data-product-id');
                    if (productId) {
                        window.location.href = `/product-detail/${productId}`;
                    }
                }

                // Updated category navigation - use category ID instead of name
                if (e.target.closest('.category-card')) {
                    const categoryCard = e.target.closest('.category-card');
                    const categoryId = categoryCard.dataset.category;
                    if (categoryId) {
                        // Navigate to products page with category filter
                        window.location.href = `/products/?category=${categoryId}`;
                    }
                }
            });
        }


        // Initialize the application
        document.addEventListener('DOMContentLoaded', async function() {
            setupEventListeners();
            await initCategories();
            await initFeaturedProducts();
        });
    </script>
</body>
</html>